# PWA Setup Guide

## âœ… Completed Configuration

The following PWA components have been set up:

### 1. **manifest.json**
- Created at `app/manifest.json`
- Configured with app name, description, icons, theme colors
- Includes app shortcuts for quick access
- **Note**: This file needs to be copied to `public/` during build (microtastic should handle this)

### 2. **HTML Meta Tags**
- Added PWA meta tags to `app/index.html`:
  - Theme color
  - Apple mobile web app tags
  - Manifest link
  - Apple touch icons
  - Favicons

### 3. **Service Worker Registration**
- Service worker registration code added to `app/index.html`
- Handles installation, updates, and offline functionality
- Auto-reloads when new version is available

### 4. **Service Worker**
- Already exists at `public/sw.js` (generated by microtastic)
- Caches game assets for offline play
- âœ… Updated to include `manifest.json` in cache
- **Note**: Since microtastic auto-generates this, you may need to manually update it after builds, or check microtastic configuration options

## ðŸ”§ Required Actions

### Step 1: Create PWA Icons

You need to create icon files in `app/icons/` directory:

**Option A: Use the Icon Generator Tool**
1. Open `app/icons/generate-icons.html` in a browser
2. Draw your icon or use the default spaceship icon
3. Click "Generate All Icons"
4. Save all downloaded files to `app/icons/`

**Option B: Use Online Tools**
1. Create a 512x512 PNG icon
2. Use [PWA Asset Generator](https://github.com/onderceylan/pwa-asset-generator) or [RealFaviconGenerator](https://realfavicongenerator.net/)
3. Download all sizes and place in `app/icons/`

**Required sizes:**
- icon-72x72.png
- icon-96x96.png
- icon-128x128.png
- icon-144x144.png
- icon-152x152.png
- icon-192x192.png
- icon-384x384.png
- icon-512x512.png

### Step 2: Service Worker Cache âœ…

The service worker has been updated to include `manifest.json` in the cache. 

**Note**: Since microtastic generates the service worker automatically, if you rebuild and the manifest is missing from the cache, you may need to:
- Manually add `"manifest.json"` to the `filesToCache` array in `public/sw.js` after each build, OR
- Check microtastic documentation for configuration options to customize the service worker

### Step 3: Verify Build Process

Ensure microtastic copies these files to `public/`:
- `manifest.json`
- `icons/` directory
- `robots.txt` (optional)
- `.htaccess` (optional, for Apache servers)

### Step 4: Test PWA

1. Build production: `npm run prod`
2. Serve `public/` directory (service workers require HTTPS or localhost):
   ```bash
   # Using Python
   cd public && python3 -m http.server 8000
   
   # Using Node.js http-server
   npx http-server public -p 8000
   ```
3. Open `http://localhost:8000` in Chrome/Edge
4. Check:
   - Chrome DevTools > Application > Manifest (should show manifest)
   - Chrome DevTools > Application > Service Workers (should show registered)
   - Install prompt should appear in address bar
   - Test offline mode (DevTools > Network > Offline)

## ðŸ“± PWA Features

Once set up, your PWA will have:

- âœ… **Installable**: Users can add to home screen
- âœ… **Offline Support**: Game works without internet
- âœ… **App-like Experience**: Standalone mode when installed
- âœ… **Auto-updates**: Service worker handles updates
- âœ… **Fast Loading**: Assets cached for quick access

## ðŸ› Troubleshooting

**Service Worker not registering:**
- Must be served over HTTPS or localhost
- Check browser console for errors
- Verify `sw.js` is accessible at root path

**Icons not showing:**
- Verify all icon files exist in `app/icons/`
- Check file paths in `manifest.json`
- Clear browser cache and reload

**Install prompt not appearing:**
- Check Chrome DevTools > Application > Manifest for errors
- Verify manifest.json is valid JSON
- Ensure all required fields are present
- Icons must be present and accessible

**Offline mode not working:**
- Check service worker is registered
- Verify files are in cache (DevTools > Application > Cache Storage)
- Check `filesToCache` array includes all necessary files

## ðŸ“š Resources

- [MDN: Progressive Web Apps](https://developer.mozilla.org/en-US/docs/Web/Progressive_web_apps)
- [Web.dev: PWA Checklist](https://web.dev/pwa-checklist/)
- [Service Worker API](https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API)

